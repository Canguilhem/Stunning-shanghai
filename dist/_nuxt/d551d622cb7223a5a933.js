(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{213:function(t,e,o){var content=o(217);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(29).default)("bbe4ddc6",content,!0,{sourceMap:!1})},214:function(t,e,o){var content=o(219);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(29).default)("78091be3",content,!0,{sourceMap:!1})},216:function(t,e,o){"use strict";var r=o(213);o.n(r).a},217:function(t,e,o){(e=o(28)(!1)).push([t.i,"button[data-v-1ddb88e3]{display:block;margin:5px auto auto}.tags-container[data-v-1ddb88e3]{padding-bottom:15px}.card-body[data-v-1ddb88e3],.card-footer[data-v-1ddb88e3],.card-header[data-v-1ddb88e3]{border-radius:12px;margin-top:2px}.description[data-v-1ddb88e3]{font-weight:700}",""]),t.exports=e},218:function(t,e,o){"use strict";var r=o(214);o.n(r).a},219:function(t,e,o){(e=o(28)(!1)).push([t.i,".previewlist[data-v-501458b6]{margin:auto;padding:10px 0}.card-columns[data-v-501458b6]{padding:0 10px}",""]),t.exports=e},220:function(t,e,o){var content=o(230);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(29).default)("ee94b57e",content,!0,{sourceMap:!1})},221:function(t,e,o){var content=o(232);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(29).default)("341eb99a",content,!0,{sourceMap:!1})},225:function(t,e,o){"use strict";o(9);var r={name:"PostPreview",props:{post:{type:Object,default:function(){return[{title:"Post Title",thumbnail:"Path to post thumbnail",content:"This is the post content",photoDescription:"default picture descritpion",tags:["shopping","food"]}]}},index:{type:Number,default:0}},methods:{editPost:function(t){this.$emit("editPost",this.post)},deletePost:function(t){this.$emit("deletePost",this.post)}}},n=(o(216),o(25)),c={name:"PostPreviewList",components:{PostPreview:Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-card",{staticClass:"mb-2 background-color1",attrs:{"border-variant":"secondary"}},[o("b-btn-close",{on:{click:t.deletePost}},[t._v("X")]),t._v(" "),o("b-card-header",{staticClass:"p-1 text-center",attrs:{"header-tag":"header","header-bg-variant":"info","header-text-variant":"white",role:"tab"}},[t._v(t._s(t.post.title))]),t._v(" "),o("b-card-body",{staticClass:"background-color2"},[o("div",{staticClass:"tags-container text-center"},t._l(t.post.tags,(function(e){return o("b-badge",{key:e,attrs:{variant:"dark"}},[t._v(t._s(e))])})),1),t._v("\n    "+t._s(t.post.thumbnail)+"\n    "),o("b-img",{attrs:{src:t.post.thumbnail,thumbnail:"",fluid:"",alt:"Responsive image"}}),t._v(" "),o("b-card-text",{staticClass:"text-center"},[t._v(t._s(t.post.content))]),t._v(" "),o("b-card-text",{staticClass:"text-center description"},[t._v(t._s(t.post.photoDescription))])],1),t._v(" "),o("b-button",{attrs:{type:"edit",variant:"outline-warning"},on:{click:t.editPost}},[t._v("Edit this post")])],1)}),[],!1,null,"1ddb88e3",null).exports},props:{posts:{type:Array,default:function(){return[]}}},methods:{editPost:function(t){this.$emit("editPost",t)},deletePost:function(t){this.$emit("deletePost",t)}}},l=(o(218),Object(n.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"previewlist",attrs:{role:"tablist"}},[o("b-card-group",{attrs:{columns:""}},t._l(t.posts,(function(e,r){return o("post-preview",{key:e._id,attrs:{post:e,index:r},on:{editPost:t.editPost,deletePost:t.deletePost}})})),1)],1)}),[],!1,null,"501458b6",null));e.a=l.exports},229:function(t,e,o){"use strict";var r=o(220);o.n(r).a},230:function(t,e,o){(e=o(28)(!1)).push([t.i,"textarea[data-v-af613404]{height:10em}.tagBadge[data-v-af613404]{margin-left:5px}section[data-v-af613404]{padding:25px}.form[data-v-af613404]{width:80%;margin:auto}.form-control[data-v-af613404],select[data-v-af613404]{margin-top:5px}.buttons[data-v-af613404]{margin:auto;display:block}",""]),t.exports=e},231:function(t,e,o){"use strict";var r=o(221);o.n(r).a},232:function(t,e,o){(e=o(28)(!1)).push([t.i,".row[data-v-ad8513e6]{display:block}.creation-form[data-v-ad8513e6]{padding-bottom:15px;margin-bottom:0}",""]),t.exports=e},243:function(t,e,o){"use strict";o.r(e);o(45);var r,n,c,l,d=o(15),f=o(41),h=o.n(f),m=o(225),v={name:"CreatePostForm",props:["defaultValues"],data:function(){return{options:[{value:"food",text:"food"},{value:"city",text:"city"},{value:"technology",text:"technology"},{value:"shopping",text:"shopping"}],form:{title:this.defaultValues.title,path:this.defaultValues.thumbnail,photoDescription:this.defaultValues.photoDescription,content:this.defaultValues.content,tags:this.defaultValues.tags},show:!0}},methods:{onSubmit:function(){this.$emit("publishPost",this.form)},onReset:function(){this.form.title="",this.form.path="",this.form.content="",this.form.photoDescription="",this.form.tags=[]}},destroyed:function(){console.log("destroyed")}},_=(o(229),o(25)),x=Object(_.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"form background-color2"},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)},reset:function(e){return e.preventDefault(),t.onReset(e)}}},[o("b-form-row",[o("b-col",[o("b-form-input",{attrs:{id:"title",required:"",placeholder:"Post Title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),o("b-form-row",[o("b-col",[o("b-form-input",{attrs:{id:"path",required:"",placeholder:"Image path"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1)],1),t._v(" "),o("b-form-row",[o("b-col",[o("b-form-textarea",{attrs:{id:"content",required:"",placeholder:"Write your story here"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),o("b-form-row",[o("b-col",[o("b-form-textarea",{attrs:{id:"photoDescription",required:"",placeholder:"Describe your photo"},model:{value:t.form.photoDescription,callback:function(e){t.$set(t.form,"photoDescription",e)},expression:"form.photoDescription"}})],1)],1),t._v(" "),o("b-form-group",{attrs:{"label-cols-lg":"3",id:"tags",label:"Tags:","label-align":"left","label-for":"tags"}},[o("div",{staticClass:"tags-container"},t._l(t.form.tags,(function(e){return o("b-badge",{key:e,staticClass:"tagBadge",attrs:{variant:"dark"}},[t._v(t._s(e))])})),1),t._v(" "),o("b-form-select",{attrs:{options:t.options,multiple:"","select-size":4},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1),t._v(" "),o("div",{staticClass:"buttons"},[o("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),o("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1)],1)],1)}),[],!1,null,"af613404",null).exports,y={components:{PostPreviewList:m.a,CreateForm:x},data:function(){return{show:!1,post:{title:"",thumbnail:"",photoDescription:"",content:"",tags:[]},formKey:0,listKey:0}},middleware:"auth",methods:{publish:(l=Object(d.a)(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Admin Page  == publishMethod"),o={title:e.title,thumbnail:e.path,content:e.content,photoDescription:e.photoDescription,tags:e.tags},console.log("payload : "+e),t.next=5,h.a.post("http://localhost:3000/api/posts/",o);case 5:t.sent,this.rerenderList();case 7:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)}),editPost:(c=Object(d.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.show=!0,console.log(e),this.post.title=e.title,this.post.thumbnail=e.thumbnail,this.post.content=e.content,this.post.photoDescription=e.photoDescription,this.post.tags=e.tags,this.rerenderForm(),this.rerenderList();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)}),deletePost:(n=Object(d.a)(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("deleted Post with id",e._id),t.next=3,h.a.delete("http://localhost:3000/api/posts/".concat(e._id));case 3:o=t.sent,console.log(o),this.rerenderList();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)}),rerenderForm:function(){this.formKey+=1},rerenderList:function(){this.listKey+=1}},asyncData:(r=Object(d.a)(regeneratorRuntime.mark((function t(){var e,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("http://localhost:3000/api/posts/");case 2:return e=t.sent,data=e.data,t.abrupt("return",{posts:data});case 5:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},w=(o(231),Object(_.a)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-2"}),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("h1",[t._v("Admin Part")]),t._v(" "),o("br"),t._v(" "),o("b-button",{attrs:{variant:"outline-light"},on:{click:function(e){t.show=!0}}},[t._v("Ajouter un post")])],1),t._v(" "),o("div",{staticClass:"col-sm-2"})]),t._v(" "),t.show?o("div",{staticClass:"creation-form row"},[o("create-form",{key:t.formKey,attrs:{defaultValues:t.post},on:{publishPost:t.publish}})],1):t._e(),t._v(" "),o("div",{staticClass:"background-color2"},[o("h1",{staticClass:"text-center"},[t._v("List of posts ("+t._s(t.posts.length)+") :")]),t._v(" "),o("post-preview-list",{key:t.listKey,attrs:{posts:t.posts},on:{editPost:t.editPost,deletePost:t.deletePost}})],1)])}),[],!1,null,"ad8513e6",null));e.default=w.exports}}]);